server:
  port: 8081
  servlet:
    context-path: /api # 如果你的前端请求都带了 /api，这里必须配置
    session:
      timeout: 30m
      cookie:
        http-only: true
        # 注意：如果你的域名没开启 HTTPS，请将 secure 改为 false，否则 Session 无法保存
        secure: true
        same-site: none

spring:
  # 1. 数据库配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://127.0.0.1:3306/usmsecondhand?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Singapore
    username: root
    password: cmt322g16

  # 2. 文件上传限制 (必须添加，否则无法上传高清图)
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

  # 3. 静态资源映射
  web:
    resources:
      static-locations: classpath:/static/,file:${file.upload-dir}

  # 4. JSON 时间格式化
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Singapore

# 5. 自定义文件路径配置
file:
  upload-dir: /var/www/uploads/
  domain: https://usm-compus-swap.duckdns.org/api

# 6. MyBatis-Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true # 建议开启，符合 Java 命名规范
    # 生产环境关闭详细 SQL 日志以保护磁盘和性能
  global-config:
    db-config:
      logic-delete-field: isDelete
      logic-delete-value: 1
      logic-not-delete-value: 0

# 7. 日志配置
logging:
  level:
    root: info
    com.cmt322.usmsecondhand.mapper: warn # 只记录 SQL 警告，不记录每条查询